import{h as G,u as V,i as X,j as Z,k as ee,t as le,l as te,n as S,p as g,q as e,s as Ee,v as ae,x as se,R as W,y as re,z as ie,A as Be,B as oe,C as Ae,D as I,E as $,G as ne,H as ue,I as ce,J as me,L as he,K as de,M as ve,N as ye,O as M,P as De,Q as F}from"./app-DdqCBpeP.js";const pe=["/","/2017/1023.AdbUsing.html","/2017/1217.RandomNum1.html","/2017/1220.Valine.html","/2018/0113.50YearsLater.html","/2018/0127.Clipboard.html","/2018/0203.add-download-markdown.html","/2018/0224.Drcom.html","/2018/0301.drcom-develop.html","/2018/0525.graduation-and-flag.html","/2018/0707.using-oneindex.html","/2018/0713.image-format.html","/2018/1028.KeyCastOW.html","/2018/1120.9x9.html","/2019/01050.pay-for-knowledge.html","/2019/01190.cpu-reduction-voltage.html","/2019/01260.your-own-yilia-1.html","/2019/02010.your-own-yilia-2.html","/2019/04070.small-jj.html","/2019/04140.ddns.html","/2019/04290.unity-webgl-keng.html","/2019/07140.mx-and-cname.html","/2019/08080.rss-rsshub.html","/2019/09130.proxy1.html","/2019/10020.custom-mirror.html","/2019/10210.azure-ci.html","/2019/11130.unity-2danimation.html","/2019/11260.5g-wifi.html","/2019/11290.hexo-scripts.html","/2020/01110.yearend-summary.html","/2020/01180.archlinux-install.html","/2020/02220.aspnetcore-vue.html","/2020/02230.bilibili-danmaku.html","/2020/03230.bilibili-bvid.html","/2020/05160.blog-ci.html","/2020/06090.voicemeeter.html","/2020/06210.tm.html","/2020/07090.arduino-first-sight.html","/2020/07120.flash-image.html","/2020/07121.router-ap-wifi.html","/2020/07122.side-routing.html","/2020/07200.pve-router.html","/2020/08210.omv-oia.html","/2020/08260.omv-0.html","/2020/08261.omv-1.html","/2020/08280.omv-2.html","/2020/09030.omv-3.html","/2020/09040.omv-4.html","/2020/10290.Academic-conference-live-broadcast.html","/2021/08160.custom-mirror.html","/2022/01190.%E8%87%AA%E5%B7%B1%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AF%BC%E6%92%AD%E5%8F%B0.html","/2022/02020.%E8%87%AA%E5%B7%B1%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAvuepress%E6%8F%92%E4%BB%B6.html","/2022/02090.%E7%94%A8Scoop%E5%AE%89%E8%A3%85%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7.html","/2022/02150.%E5%8D%9A%E5%AE%A2%E7%8E%B0%E5%9C%A8%E7%9A%84%E6%83%85%E5%86%B5.html","/2022/02210.Docker%E5%AE%89%E8%A3%85Caddy%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6.html","/2022/03010.FMP4%E3%80%81HLS%E5%92%8CDASH%E8%A7%86%E9%A2%91%E7%94%9F%E6%88%90.html","/2022/03090.%E4%BD%BF%E7%94%A8CI%E5%B0%86%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0GitHub.html","/2022/03091.%E4%BD%BF%E7%94%A8CI%E5%B0%86%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0%E5%8F%88%E6%8B%8D%E4%BA%91.html","/2022/06050.CSharp%E8%A7%A3%E6%9E%90B%E7%AB%99%E5%BC%B9%E5%B9%95.html","/2022/07040.%E4%BD%BF%E7%94%A8NDI%E5%8F%8C%E6%9C%BA%E4%BD%8D%E7%9B%B4%E6%92%AD.html","/2022/10270.CSharp%E7%9A%84IPAddress%E7%B1%BBJson%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96.html","/2022/10310.Arduino%E4%B8%8A%E4%BD%8D%E6%9C%BA%E9%80%9A%E4%BF%A1.html","/2023/01030.nginx-quic%E7%BC%96%E8%AF%91%E5%92%8C%E4%BD%BF%E7%94%A8.html","/2023/01050.%E5%B0%86%E5%8D%9A%E5%AE%A2%E5%88%86%E4%BA%AB%E5%88%B0%E5%BE%AE%E4%BF%A1.html","/2023/01200.%E5%B0%8F%E7%B1%B313%E5%AE%89%E8%A3%85KernelSU.html","/2023/05100.%E5%9C%A8Linux%E4%B8%AD%E5%AE%88%E6%8A%A4dotnetcore%E7%A8%8B%E5%BA%8F.html","/2023/05210.%E7%BC%96%E8%AF%91Caddy%E5%B9%B6%E4%BD%BF%E7%94%A8.html","/2023/11120.Unity3D%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BDJson.html","/2024/03030.Unity3D%E4%B8%AD%E4%BD%BF%E7%94%A8SkiaSharp%E5%A4%84%E7%90%86Texture2D.html","/2024/08240.vlc-unity%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0010.%E9%9C%80%E8%A6%81%E7%9A%84%E8%BD%AF%E4%BB%B6.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0020.%E9%9D%9Eroot%E7%94%A8%E6%88%B7%E5%92%8C%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0030.%E6%9B%B4%E6%8D%A2%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E5%92%8C%E5%AE%89%E8%A3%85%E5%9F%BA%E6%9C%AC%E8%BD%AF%E4%BB%B6.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0040.%E5%AE%89%E8%A3%85Caddy%E4%BD%9C%E4%B8%BAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0050.%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPHP.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0055.%E9%83%A8%E7%BD%B2%E5%92%8C%E9%85%8D%E7%BD%AEMeting.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0060.%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEnodejs.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0070.%E9%83%A8%E7%BD%B2%E5%92%8C%E9%85%8D%E7%BD%AEwaline.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/","/pages/MessageBoard.html","/pages/aboutme.html","/pages/friends.html","/404.html","/2017/","/2018/","/2019/","/2020/","/2021/","/2022/","/2023/","/2024/","/pages/","/category/","/tag/","/tag/%E6%90%9E%E6%9C%BA/","/tag/unity/","/tag/%E5%BB%BA%E7%AB%99%E7%AC%94%E8%AE%B0/","/tag/%E9%9A%8F%E4%BE%BF%E6%B0%B4%E6%B0%B4/","/tag/%E6%B6%A8%E5%A7%BF%E5%8A%BF/","/tag/%E8%BD%AF%E4%BB%B6/","/tag/c_/","/tag/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/","/tag/linux/","/tag/dotnet/","/tag/%E7%A1%AC%E4%BB%B6/","/tag/%E8%BD%AF%E8%B7%AF%E7%94%B1/","/tag/nas/","/tag/omv/","/tag/%E7%9B%B4%E6%92%AD/","/tag/%E7%9B%B4%E6%92%AD%E5%AF%BC%E6%92%AD/","/article/","/star/","/timeline/"],Ce="SLIMSEARCH_QUERY_HISTORY",v=M(Ce,[]),ge=()=>{const{queryHistoryCount:a}=F;return{enabled:a>0,queryHistories:v,addQueryHistory:B=>{v.value=Array.from(new Set([B,...v.value.slice(0,a-1)]))},removeQueryHistory:B=>{v.value=[...v.value.slice(0,B),...v.value.slice(B+1)]}}},R=a=>pe[a.id]+("anchor"in a?`#${a.anchor}`:""),Fe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:j}=F,y=M(Fe,[]),be=()=>({enabled:j>0,resultHistories:y,addResultHistory:i=>{{const B={link:R(i),display:i.display};"header"in i&&(B.header=i.header),y.value=[B,...y.value.slice(0,j-1)]}},removeResultHistory:i=>{y.value=[...y.value.slice(0,i),...y.value.slice(i+1)]}}),fe=a=>{const{page:i,routeLocale:B}=ne(),b=ue(),s=S(0),D=g(()=>s.value>0),n=ce([]);return me(()=>{const{search:f,terminate:m}=he(),p=ve(h=>{const{resultsFilter:x=E=>E,querySplitter:d,suggestionsFilter:Q,...r}=b.value;h?(s.value+=1,f(h,B.value,r).then(E=>x(E,h,B.value,i.value)).then(E=>{s.value-=1,n.value=E}).catch(E=>{console.warn(E),s.value-=1,s.value||(n.value=[])})):n.value=[]},F.searchDelay-F.suggestDelay,{maxWait:5e3});de([a,B],([h])=>p(h.join(" "))),ye(()=>{m()})}),{isSearching:D,results:n}};var He=G({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:i}){const B=V(),b=X(),s=Z(ee),{addQueryHistory:D,queryHistories:n,removeQueryHistory:f}=ge(),{resultHistories:m,addResultHistory:p,removeResultHistory:h}=be(),x=le(a,"queries"),{results:d,isSearching:Q}=fe(x),r=te({isQuery:!0,index:0}),E=S(0),u=S(0),q=g(()=>n.value.length>0||m.value.length>0),H=g(()=>d.value.length>0),k=g(()=>d.value[E.value]||null),P=()=>{const{isQuery:l,index:t}=r;t===0?(r.isQuery=!l,r.index=l?m.value.length-1:n.value.length-1):r.index=t-1},U=()=>{const{isQuery:l,index:t}=r;t===(l?n.value.length-1:m.value.length-1)?(r.isQuery=!l,r.index=0):r.index=t+1},T=()=>{E.value=E.value>0?E.value-1:d.value.length-1,u.value=k.value.contents.length-1},O=()=>{E.value=E.value<d.value.length-1?E.value+1:0,u.value=0},_=()=>{u.value<k.value.contents.length-1?u.value+=1:O()},Y=()=>{u.value>0?u.value-=1:T()},w=l=>l.map(t=>De(t)?t:e(t[0],t[1])),J=l=>{if(l.type==="customField"){const t=oe[l.index]||"$content",[c,o=""]=Ae(t)?t[b.value].split("$content"):t.split("$content");return l.display.map(A=>e("div",w([c,...A,o])))}return l.display.map(t=>e("div",w(t)))},C=()=>{E.value=0,u.value=0,i("updateQuery",""),i("close")},K=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},s.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},n.value.map((l,t)=>{const c=r.isQuery&&r.index===t;return e("li",{class:["slimsearch-record-matches",{active:c}],role:"option","aria-selected":c,onClick:()=>{i("updateQuery",l)}},e("div",[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},l),e("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),f(t)}})]))}))])),N=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},s.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((l,t)=>{const c=!r.isQuery&&r.index===t;return e("li",{class:["slimsearch-record-matches",{active:c}],role:"option","aria-selected":c},e(W,{to:l.link,onClick:()=>{C()}},()=>[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[l.header?e("div",{class:"slimsearch-record-content-header"},l.header):null,e("div",l.display.map(o=>w(o)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),h(t)}})]))}))]));return Ee("keydown",l=>{if(a.isFocusing){if(H.value){if(l.key==="ArrowUp")Y();else if(l.key==="ArrowDown")_();else if(l.key==="Enter"){const t=k.value.contents[u.value];D(a.queries.join(" ")),p(t),B.push(R(t)),C()}}else if(l.key==="ArrowUp")P();else if(l.key==="ArrowDown")U();else if(l.key==="Enter"){const{index:t}=r;r.isQuery?(l.preventDefault(),i("updateQuery",n.value[t])):(B.push(m.value[t].link),C())}}}),ae([E,u],()=>{var l;(l=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||l.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:a.queries.length?!H.value:!q.value}]},a.queries.length?Q.value?e(se,{hint:s.value.searching}):H.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},d.value.map(({title:l,contents:t},c)=>{const o=E.value===c;return e("div",{class:["slimsearch-record",{active:o}],role:"group","aria-selected":o},[e("div",{class:"slimsearch-record-title"},l||s.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},t.map((A,z)=>{const L=o&&u.value===z;return e("li",{class:["slimsearch-record-matches",{active:L}],role:"option","aria-selected":L},e(W,{to:R(A),onClick:()=>{D(a.queries.join(" ")),p(A),C()}},()=>[A.type==="text"?null:e(A.type==="title"?re:A.type==="heading"?ie:Be,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[A.type==="text"&&A.header?e("div",{class:"slimsearch-record-content-header"},A.header):null,e("div",J(A))])]))}))])})):s.value.emptyResult:q.value?[K(),N()]:s.value.emptyHistory)}});export{He as default};
