---
title: 记一次大型学术会议直播技术要点
date: 2020-10-29 12:08:35
tags: 
  - 随便水水
  - 涨姿势
keywords: 直播 技术 视频 音频 分享
comments: true
permalink: /2020/Academic-conference-live-broadcast.html

categories: 
  - 随笔
---

一次大型的学术会议直播，简单记录一下技术要点，分享给新入行的朋友们。

<!-- more -->

前段时间公司接了一个大型学术会议直播的活，我就一直加班忙着搞这个，现在搞完了，简单分享一下，低成本，线上线下学术会议的直播方案。

其实这个事搞得挺失败的，分享出来大家看看乐子就好，关于公司和大会的情况文章中都不会透漏。

## 吐槽

大型直播这东西，只有真正做过才知道有多麻烦，而且这个还要再加上远程会议，想要吐槽的就免了吧，连的那一堆线，别说是外行，一个内行看了都头疼。别以为直播就是带两台电脑，几张采集卡，连几根线就可以了，设计视频流和音频流走向真的很麻烦。

## 难点

这个最难的地方就是第二天有 4 个会场，4 个会场真的太难搞了，需要的设备就是 4 倍数量的。

## 方案选型

这个真的是一言难尽啊，我在公司是做技术的，当时人家找到我们，我们商务那边跟我说的大概就是下面几点：

- 一个国际会议
- 有线上和线下做报告的，而且需要现场和线上交流
- 有线上不做报告的人参会
- 第一天一个主会场，第二天四个分会场

需求看起来很简单，我当时就给了一个方案，但是却忽略了一个很重要的因素，参会人数，我们没问人家，我以为一个国际会议，怎么也要有几百人参会，那线上的应该也要上百了吧。但是现实给了我一巴掌，现场参会接近 200 人，线上不足 30 人。

接着说方案搭建的问题，我按照线上几百人写的方案，因为会议报名也是我们公司开发的系统，所以就自己搭建了一个直播页面，用来给线上不需要做报告的人看直播，用腾讯会议连线现场和远程，用来做线上报告。如果是几百人的话，这套方案确实挺不错的，但是只有几十人，直接全加腾讯会议不就好了，干嘛还要搞个直播，现场接线复杂程度成倍上升。

反正最终基本上就是这样的方案：

- 现场搭建 LED 大屏，音响系统（租用酒店的）
- 远程做报告使用腾讯会议
- 线上参会使用直播系统

在说用到的设备之前，先简单说明一下，我们公司发展情况真的是一言难尽，属于起个大早，赶个晚集那种，起步很早，但是啥都没抢到。公司的设备也全都是业余的，就是钱没花到刀刃上。

直播这东西，画质音质啥的都是虚的，不重要，最重要的是包装。真正花钱的主都在现场坐着，就在旁边看着你，把自己包装成一个专业的团队，线上只要不掉线，能听得清声音，那就一切 OK。以前我也提议过做一个专业的导播台，但是一直没结果，这次做了这个大型直播之后，老板终于看到不专业的设备做这种直播有多麻烦了，但是导播台这个钱估计还是不想花。

其实一个专业的导播台也没有多复杂，就是一个定制的电脑机箱，里面装上一台性能过得去的电脑，多配上几块屏幕，搞上一张多路采集卡，一两张带环出的采集卡，再配上一个多路声卡或者调音台，都是很简单的东西。导播台这东西直播用起来方便，最重要的是拿出去装 B 啊，人家一看就是专业团队。

题外话说完了，接着说我们用到的设备：

- 摄像机 3 台
- BMD ATEM MINI 导播台 1 台
- 笔记本电脑 3 台
- 声卡 1 张
- 采集卡 3 张
- HDMI 分线器 2 个
- HDMI 音频分离器 1 个
- 显示器 1 个
- 线材若干

其中 3 台笔记本，一台用于播放 PPT，一台用于登录腾讯会议，一台用于直播推流。

简单说一下主会场几个视频信号和音频信号的走向：

- 现场摄像机一共有 3 个机位，一个拍摄讲台，给报告人特写，一个拍摄观众，一个在场后拍摄全景，三个都是固定机位。三个摄像机的视频信号全部进 ATEM MINI 导播台，然后采集到的信号进导播电脑，环出的信号经一张采集卡进入登录腾讯会议的电脑，作为腾讯会议的摄像头。
- PPT 电脑复制主屏幕的信号出来后通过一个 HDMI 分线器分信号出来，其中一路信号直接接到报告台上的屏幕上，其中一路经采集卡进入腾讯会议电脑，这台电脑上使用 OBS 的全屏投影功能投射到一个虚拟屏幕上，腾讯会议可以选择共享这块虚拟屏幕，让远程的参会人员观看现场报告的 PPT，最后还有一路信号接入到 LED 屏幕那边，他们那边有个信号切换台可以切换信号，我需要他们给我一个环出信号，这个信号后面会一起说。
- 腾讯会议电脑复制主屏幕的信号出来以后，直接给现场 LED 屏幕那边，进他们的信号切换台，然后给我环出一路信号，这个和前面提到的 PPT 电脑信号进入到同一个切换台，反正就是现场大屏显示的是什么，他们就要给我环出一路什么信号，环出的信号经一张采集卡进入导播电脑。

音频信号：

- PPT 播放电脑的音频信号通过 AUX 线，接入 ATEM 导播台，采集进入导播电脑。
- 腾讯会议的电脑，音频信号通过 AUX 线接入导播电脑的话筒插口上。
- 现场麦克风信号接入导播电脑的声卡输入接口上。
- 腾讯会议和 PPT 播放电脑的音频，在导播电脑上混音输出到现场调音台上。
- 现场麦克风和 PPT 播放电脑的音频在导播电脑上混音输出到腾讯视频电脑上。
- PPT 播放电脑，腾讯会议电脑，现场麦克风，三种音频都要采集直播出去。

软件选择：

- 线上会议选择腾讯会议，前面已经提到好多次了。
- 直播推流使用 OBS。
- 声音控制使用 Voicemeeter。

导播电脑预设场景：

- 一个现场 4:3 画面的场景。
- 一个现场 16:9 画面的场景。
- 一个现场全景（只放摄像机画面）的场景。
- 一个腾讯会议的场景。

一切看起来都很完美，然而现实给了我们一大巴掌。

## 遇到的问题

我们那天大概是晚上九点多开始布置设备，同时租用的 LED 屏幕也开始拼装，然后大概到十二点开始测试设备。

遇到的第一个问题就是音频，这个是彩排的时候根本没遇到的，以前也根本没遇到过，音频里电流声贼大。我们推测是酒店的调音台不够好，因为我们接了 LED 屏上去，一个长 12 米，高 3.5 米的大型 P2 LED 屏，42 平米的屏幕，平均功率要在 50KW 以上，峰值功率应该能超过 100KW，这么大的设备产生多大的电磁干扰就不用多说了吧。因为我们以前也没做过这种直播，没有经验，其实解决起来也很简单，搞一个音频隔离墙就可以了。但是搞音频隔离器又遇到了一个麻烦，我们用的都是 3.5mm 或者是 6.35mm 的接口，能借到的音频隔离器都是卡侬接口的，没有纯 6.35 输入 + 输出的，最后也只能借到一个特别特别小的音频隔离器，先把现场的解决了，线上的声音就用软件降噪解决一下吧。

第二个问题是视频接口的问题。因为我们的设备全是 HDMI 接口，但是 LED 屏那边全是 DVI 接口，他们的切换器全是 DVI 接口，这个是我们没考虑周到，应该提前问清楚他们都是什么接口。

第三个问题还是音频的问题，酒店是设备实在是太烂了，第二天四个会场中有一个会场是我们自己租的音响设备，也只有那一个会场一点问题没有，其他三个会场都或多或少有一些问题。说实话，这些设备能尽量用自己的就用自己的，要不就专门租一套，让他们配一个专门的技术，酒店的设备差不说，音响师还找不到人，他们的接线又搞不清，真的很麻烦。

第四个是时间问题，时间太紧了，有四个会场需要调试，而且只有我一个人去接线，拖着两大箱的设备，一个一个会场去调试，从晚上七点半一直搞到凌晨两点半才搞得差不多，第二天早上六点半起床，上去接着搞，搞到八点半正式开始直播，时间看似很充裕，但是分到每个会场的，只有那么一点点时间。

总之前面这些问题都是没钱才会遇到的，如果预算充足，所有会场都自己租音响，多买几个导播台，自己组两台导播机器，所有的问题都能解决。
